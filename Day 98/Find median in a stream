class Solution {
    public ArrayList<Double> getMedian(int[] arr) {
        // code here
        ArrayList<Double> ans=new ArrayList<>();
        PriorityQueue<Integer> maxheap=new PriorityQueue<>(Collections.reverseOrder());
        PriorityQueue<Integer> minheap=new PriorityQueue<>();
        
        for(int num:arr){
            if(maxheap.isEmpty() || num<=maxheap.peek() ){
                maxheap.add(num);
            }else{
                minheap.add(num);
            }
            
            if(maxheap.size()>minheap.size()+1){
                minheap.add(maxheap.poll());
            }else if(minheap.size()>maxheap.size()){
                maxheap.add(minheap.poll());
            }
            
            if(maxheap.size()==minheap.size()){
                double meadian=(maxheap.peek()+minheap.peek())/2.0;
                ans.add(meadian);
            }else{
                ans.add((double)maxheap.peek());
            }
        }
        
        
        return ans;
       
    }
}

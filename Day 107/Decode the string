class Solution {
    static String decodeString(String s) {
        // code here
        Stack<String> stack=new Stack<>();
        StringBuilder currentString=new StringBuilder();
        int k=0;
        
        for(char ch:s.toCharArray()){
            if(Character.isDigit(ch)){
                k=k*10+(ch-'0');
            }else if(ch=='['){
                stack.push(currentString.toString());
                stack.push(String.valueOf(k));
                currentString=new StringBuilder();
                k=0;
            }else if(ch==']'){
                int repeatcount=Integer.parseInt(stack.pop());
                String previousString=stack.pop();
                StringBuilder decoded=new StringBuilder(previousString); 
                for(int i=0;i<repeatcount;i++){
                    decoded.append(currentString);
                }
                
                currentString=decoded;
            }else{
                currentString.append(ch);
            }
        }
        return currentString.toString();
    }
}
